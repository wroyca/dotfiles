#!/usr/bin/env bash

# Applications running in a Flatpak sandbox cannot normally launch arbitrary
# subprocesses outside the container to open files and URLs. To address this,
# we rely on D-Bus session bus to communicate with the xdg-desktop-portal
# service outside the container.

if [[ -f "/run/.containerenv" ]]; then
  ${TOOLBOX_PATH:+flatpak-spawn --host} /usr/bin/xdg-open "$@"
else
  /usr/bin/xdg-open "$@"
fi
